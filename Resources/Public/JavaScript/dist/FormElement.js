import a from"@typo3/backend/modal.js";class d{constructor(){const o=this,n=document.querySelectorAll("input.form-element-list-search");o.scrollToSelectedRadioButton(".form-element-list",'.form-element-list-item input[type="radio"]'),n.forEach(function(e){const r=e.closest(".form-element-list-wrap").querySelectorAll("*[data-search]");e.addEventListener("keypress",function(t){t.key==="Enter"&&t.preventDefault()}),e.addEventListener("keyup",function(t){o.searchForElements(t.target.value,r)})}),document.querySelectorAll(".form-element-list-preview").forEach(function(e){e.addEventListener("click",function(r){r.preventDefault();const s='<img src="'+e.getAttribute("data-preview")+'" style="max-width: 100%; max-height: 100%; margin: 0 auto; display: block;" />',i=document.createElement("div");i.innerHTML=s;const c=i.firstElementChild;a.confirm("Preview",c,"info",[{text:"Close",trigger:function(){a.dismiss()}}])})})}searchForElements(o,n){const l=o.toLowerCase();n.forEach(function(e){const r=e.getAttribute("data-search"),t=e.querySelector(".form-element-label");if(o===""&&(t.innerHTML=r),r.toLowerCase().indexOf(o.toLowerCase())>-1){e.classList.remove("hidden");const s=new RegExp(`(${l}|${o})`,"gi"),i=r.replace(s,c=>`<mark>${c}</mark>`);t.innerHTML=i}else e.classList.add("hidden")})}scrollToSelectedRadioButton(o,n){document.querySelectorAll(o).forEach(function(e){if(!e){console.error("Scrollable list not found.");return}const t=Array.from(e.querySelectorAll(n)).find(s=>s.checked);if(!t){console.error("No radio button is selected.");return}e.scrollTo(0,t.closest("tr").offsetTop)})}}export default new d;
